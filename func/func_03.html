<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
        var users = [
            { id: 1, name: "ID", age: 36 },
            { id: 2, name: "BJ", age: 32 },
            { id: 3, name: "JM", age: 32 },
            { id: 4, name: "PJ", age: 27 },
            { id: 5, name: "HA", age: 25 },
            { id: 6, name: "JE", age: 26 },
            { id: 7, name: "JI", age: 31 },
            { id: 8, name: "MP", age: 23 },
        ];

        //1. 명령형 코드

        // 1. 30세 이상인 users를 거른다.
        var temp_users = [];
        for (var i = 0; i < users.length; i++) {
            if (users[i].age >= 30) {
                temp_users.push(users[i]);
            }
        }
        var users_name = [];
        // 2. 30세 이상인 users의 names를 수집한다.
        for (var j = 0; j < temp_users.length; j++) {
            users_name.push(temp_users[j].name)
        }
        // 3. 3세 미만인 users를 거른다.
        var temp_users2 = [];
        for (var i = 0; i < users.length; i++) {
            if (users[i].age >= 30) {
                temp_users2.push(users[i]);
            }
        }
        // 4. 3세 미만인 users의 ages를 수집한다.
        var users_age = [];
        for (var j = 0; j < temp_users2.length; j++) {
            users_age.push(temp_users2[j].age)
        }

        // 2. _filter, _map 으로 리팩토링

        function _filter(users, predi) {
            var new_list = [];
            for (var i = 0; i < users.length; i++) {
                if (predi(users[i])) {
                    new_list.push(users[i]);
                }
            }
            return new_list;
        }
        console.log(_filter(users, function (user) { return user.age >= 30; }));
        console.log(_filter(users, function (user) { return user.age < 30; }));

        //3. _map

        function _map(list, mapper) {
            var new_list = [];
            for (var j = 0; j < list.length; j++) {
                console.log(list[j])
                new_list.push(mapper(list[j]));
            }
            return new_list;
        }

        var over_30 = _filter(users, function (user) { return user.age < 30; });
        console.log(over_30);
        var names = _map(over_30, function (user) { return user.name });
        console.log(names);

        var under_30 = _filter(users, function (user) { return user.age >= 30; });

        var ages = _map(under_30, function (user) { return user.age });
        console.log(ages);
    </script>
</body>

</html>